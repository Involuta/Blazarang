[gd_scene load_steps=30 format=3 uid="uid://icbfj05gq8vk"]

[ext_resource type="Script" path="res://cotu/CotuControl.gd" id="1_aleek"]
[ext_resource type="Script" path="res://cotu/CotuHurtbox.gd" id="2_fvpfg"]
[ext_resource type="PackedScene" uid="uid://b18v7gt45bq4p" path="res://glb_inherited_scenes/cotu_anims_12.tscn" id="3_fbfgf"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_80wmm"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_kxw61"]

[sub_resource type="SphereMesh" id="SphereMesh_dx5gt"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_d7hp7"]
albedo_color = Color(0.52549, 0.00392157, 0.894118, 1)

[sub_resource type="PrismMesh" id="PrismMesh_jrkru"]
material = SubResource("StandardMaterial3D_d7hp7")
size = Vector3(0.75, 0.75, 0.25)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_agv1c"]
animation = &"AerialEvadeFast"
play_mode = 1

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_t00fa"]
animation = &"FrontTwistFlipFast"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_yiyf2"]
animation = &"QuickSpinCW"
play_mode = 1

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_tqigm"]
animation = &"QuickSpinCW"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_kvedh"]
animation = &"Idle_pose"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_j62tw"]
animation = &"DodgeRun"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_nl5hg"]
animation = &"Run"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_ivebn"]
blend_point_0/node = SubResource("AnimationNodeAnimation_kvedh")
blend_point_0/pos = 0.0
blend_point_1/node = SubResource("AnimationNodeAnimation_j62tw")
blend_point_1/pos = 15.0
blend_point_2/node = SubResource("AnimationNodeAnimation_nl5hg")
blend_point_2/pos = 10.0
min_space = 0.0
max_space = 15.0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_nerqb"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_e8r0g"]
xfade_time = 0.15
advance_mode = 2
advance_condition = &"just_dodged"
advance_expression = "abs(walk_input.y) == 0"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_0y1n2"]
xfade_time = 0.15
advance_mode = 2
advance_condition = &"just_dodged"
advance_expression = "abs(walk_input.y) > 0"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ieh2i"]
xfade_time = 0.2
priority = 2
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_pc5go"]
xfade_time = 0.15
priority = 2
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_rdo08"]
xfade_time = 0.1
advance_mode = 2
advance_condition = &"just_dodged"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ggvq7"]
xfade_time = 0.1
advance_mode = 2
advance_condition = &"just_dodged"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_jsmfa"]
xfade_time = 0.05
advance_mode = 2
advance_condition = &"just_instant_rethrew"
advance_expression = "!moving_right"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_orq00"]
xfade_time = 0.15
priority = 2
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_fd6fk"]
xfade_time = 0.05
advance_mode = 2
advance_condition = &"just_instant_rethrew"
advance_expression = "moving_right
"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_kef68"]
xfade_time = 0.15
priority = 2
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_auidk"]
states/AerialEvadeFast/node = SubResource("AnimationNodeAnimation_agv1c")
states/AerialEvadeFast/position = Vector2(276.693, 5.73729)
states/FrontTwistFlipFast/node = SubResource("AnimationNodeAnimation_t00fa")
states/FrontTwistFlipFast/position = Vector2(491.693, 5.11619)
states/QuickSpinCCW/node = SubResource("AnimationNodeAnimation_yiyf2")
states/QuickSpinCCW/position = Vector2(865.875, 5.85838)
states/QuickSpinCW/node = SubResource("AnimationNodeAnimation_tqigm")
states/QuickSpinCW/position = Vector2(700.273, 5.97947)
states/RunBlendSpace/node = SubResource("AnimationNodeBlendSpace1D_ivebn")
states/RunBlendSpace/position = Vector2(531.693, 146.5)
transitions = ["Start", "RunBlendSpace", SubResource("AnimationNodeStateMachineTransition_nerqb"), "RunBlendSpace", "AerialEvadeFast", SubResource("AnimationNodeStateMachineTransition_e8r0g"), "RunBlendSpace", "FrontTwistFlipFast", SubResource("AnimationNodeStateMachineTransition_0y1n2"), "AerialEvadeFast", "RunBlendSpace", SubResource("AnimationNodeStateMachineTransition_ieh2i"), "FrontTwistFlipFast", "RunBlendSpace", SubResource("AnimationNodeStateMachineTransition_pc5go"), "AerialEvadeFast", "FrontTwistFlipFast", SubResource("AnimationNodeStateMachineTransition_rdo08"), "FrontTwistFlipFast", "AerialEvadeFast", SubResource("AnimationNodeStateMachineTransition_ggvq7"), "RunBlendSpace", "QuickSpinCW", SubResource("AnimationNodeStateMachineTransition_jsmfa"), "QuickSpinCW", "RunBlendSpace", SubResource("AnimationNodeStateMachineTransition_orq00"), "RunBlendSpace", "QuickSpinCCW", SubResource("AnimationNodeStateMachineTransition_fd6fk"), "QuickSpinCCW", "RunBlendSpace", SubResource("AnimationNodeStateMachineTransition_kef68")]
graph_offset = Vector2(174.375, -50.7899)

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_wg7n8"]
graph_offset = Vector2(-91.2, 117.12)
nodes/StateMachine/node = SubResource("AnimationNodeStateMachine_auidk")
nodes/StateMachine/position = Vector2(80, 150)
node_connections = [&"output", 0, &"StateMachine"]

[node name="cotuCB" type="CharacterBody3D"]
collision_layer = 16
collision_mask = 74
script = ExtResource("1_aleek")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
visible = false
mesh = SubResource("CapsuleMesh_80wmm")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_kxw61")

[node name="CameraTwistPivot" type="Node3D" parent="."]

[node name="CameraPitchPivot" type="Node3D" parent="CameraTwistPivot"]

[node name="CameraVisualObject" type="MeshInstance3D" parent="CameraTwistPivot/CameraPitchPivot"]
transform = Transform3D(1, -3.48787e-16, 3.48787e-16, 3.48787e-16, 1, -3.48787e-16, -3.48787e-16, 3.48787e-16, 1, 2.08165e-12, 2.08165e-12, 6)
mesh = SubResource("SphereMesh_dx5gt")
skeleton = NodePath("")

[node name="Camera3D" type="Camera3D" parent="CameraTwistPivot/CameraPitchPivot/CameraVisualObject"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.08165e-12, 2.08165e-12, 2.08165e-12)

[node name="RangPointerPivot" type="Node3D" parent="."]

[node name="RangPointer" type="MeshInstance3D" parent="RangPointerPivot"]
transform = Transform3D(1, -6.97574e-16, -1.5246e-23, -1.5246e-23, -4.37114e-08, 1, -6.97574e-16, -1, -4.37114e-08, 2.08165e-12, 2.08165e-12, -2)
mesh = SubResource("PrismMesh_jrkru")
skeleton = NodePath("../..")

[node name="Hurtbox" type="Area3D" parent="."]
collision_mask = 11
script = ExtResource("2_fvpfg")
health = 10000
enemy_hitboxes = ["EnemyHitbox"]

[node name="HurtboxCollider" type="CollisionShape3D" parent="Hurtbox"]
shape = SubResource("CapsuleShape3D_kxw61")

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource("AnimationNodeBlendTree_wg7n8")
anim_player = NodePath("../CotuAnims/AnimationPlayer")
advance_expression_base_node = NodePath("..")
active = true
parameters/StateMachine/conditions/just_dodged = false
parameters/StateMachine/conditions/just_instant_rethrew = false
parameters/StateMachine/RunBlendSpace/blend_position = 0.000634115

[node name="CotuAnims" parent="." instance=ExtResource("3_fbfgf")]

[node name="Skeleton3D" parent="CotuAnims/Armature" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.08165e-12, -0.988, 2.08165e-12)
bones/0/position = Vector3(6.74725e-05, 0.996224, -0.068947)
bones/0/rotation = Quaternion(0.00357681, 0.0033641, 0.00430092, 0.999979)
bones/1/position = Vector3(6.43515e-09, 0.0922872, -0.0106759)
bones/1/rotation = Quaternion(0.00139749, 0.0105681, -0.00611605, 0.999924)
bones/2/rotation = Quaternion(-0.0161189, -0.015726, -0.000584162, 0.999746)
bones/3/rotation = Quaternion(-0.00199818, 0.00116448, 0.00503643, 0.999985)
bones/4/rotation = Quaternion(0.0697322, 0.000240947, 0.000844718, 0.997565)
bones/7/position = Vector3(0.0663167, 0.115124, 0.032052)
bones/7/rotation = Quaternion(-0.589019, -0.462308, 0.537802, -0.387424)
bones/8/rotation = Quaternion(0.559895, 0.0678651, -0.0526247, 0.824101)
bones/9/rotation = Quaternion(-7.97854e-09, -2.16326e-06, 0.270226, 0.962797)
bones/10/rotation = Quaternion(0.0233927, -0.11194, -0.0135626, 0.993347)
bones/31/position = Vector3(-0.0617995, 0.116818, 0.0315774)
bones/31/rotation = Quaternion(0.562031, -0.490113, 0.534719, 0.397475)
bones/32/rotation = Quaternion(0.579097, -0.0832969, 0.019496, 0.810758)
bones/33/rotation = Quaternion(-2.57643e-07, 1.4567e-06, -0.236811, 0.971556)
bones/34/rotation = Quaternion(0.0409744, 0.0222749, -0.069496, 0.996491)
bones/55/rotation = Quaternion(0.0504419, 0.140472, 0.987542, -0.0498492)
bones/55/scale = Vector3(1, 0.999997, 0.999999)
bones/56/rotation = Quaternion(-0.145633, 3.63892e-07, -1.32735e-07, 0.989339)
bones/57/rotation = Quaternion(0.473628, 0.0695579, -0.0523049, 0.876414)
bones/58/rotation = Quaternion(0.29138, -0.094821, 0.0257271, 0.951549)
bones/60/rotation = Quaternion(-0.0570337, 0.0489344, 0.996276, 0.0422722)
bones/60/scale = Vector3(1, 1, 0.999997)
bones/61/rotation = Quaternion(-0.202656, -2.68259e-06, -5.39957e-07, 0.97925)
bones/62/rotation = Quaternion(0.591768, -0.0741549, 0.0264883, 0.802253)
bones/63/rotation = Quaternion(0.28445, 0.0939775, -0.0275105, 0.953677)

[editable path="CotuAnims"]
