[gd_scene load_steps=10 format=3 uid="uid://donkrix8titvb"]

[ext_resource type="PackedScene" uid="uid://5uv6uo3oxhqi" path="res://glb_imports/MeleeT3H.glb" id="1_4cfri"]
[ext_resource type="Script" path="res://glb_inherited_scenes/attach_to_hand.gd" id="2_4auvi"]
[ext_resource type="PackedScene" uid="uid://dasrfemvybmv" path="res://glb_inherited_scenes/basic_sword.tscn" id="3_a4jtx"]
[ext_resource type="PackedScene" uid="uid://cmyp1gi10xqj" path="res://glb_inherited_scenes/basic_greatshield.tscn" id="4_5dmke"]

[sub_resource type="Shader" id="Shader_gxs6v"]
code = "shader_type spatial;
render_mode cull_front, unshaded;

uniform vec4 outline_color : source_color;
uniform float outline_width = 1.0;

void vertex() {
	vec4 clip_position = PROJECTION_MATRIX * (MODELVIEW_MATRIX * vec4(VERTEX, 1.0));
	vec3 clip_normal = mat3(PROJECTION_MATRIX) * (mat3(MODELVIEW_MATRIX) * NORMAL);
	
	vec2 offset = normalize(clip_normal.xy) / VIEWPORT_SIZE * clip_position.w * outline_width * 2.0;
	
	clip_position.xy += offset;
	
	POSITION = clip_position;
}

void fragment() {
	ALBEDO = outline_color.rgb;
	if (outline_color.a < 1.0) {
		ALPHA = outline_color.a;
	}
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_wets6"]
render_priority = 0
shader = SubResource("Shader_gxs6v")
shader_parameter/outline_color = Color(1, 1, 0, 1)
shader_parameter/outline_width = 1.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_a7f18"]
next_pass = SubResource("ShaderMaterial_wets6")
diffuse_mode = 3
specular_mode = 2
albedo_color = Color(0.0666667, 0.0666667, 0.0666667, 1)
roughness = 0.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_7t628"]
shading_mode = 0
albedo_color = Color(0.607843, 0.607843, 0, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_yj0qj"]
diffuse_mode = 3
specular_mode = 1
albedo_color = Color(0.45098, 0.45098, 0.0588235, 1)
roughness = 0.2

[node name="MeleeT3H" instance=ExtResource("1_4cfri")]

[node name="ControlRig" parent="." index="0"]
script = ExtResource("2_4auvi")
obj_names = ["BasicSword", "BasicGreatshield"]
attachment_names = ["SwordAttachment", "ShieldAttachment"]
local_offset = Vector3(2.08165e-12, 2.08165e-12, 2.08165e-12)

[node name="Skeleton3D" parent="ControlRig" index="0"]
bones/0/position = Vector3(0.186255, 8.0368, 0.726565)
bones/0/rotation = Quaternion(0.0410133, -0.160225, -0.0272525, 0.985852)
bones/1/rotation = Quaternion(0.0427317, -0.0145429, 0.00638905, 0.99896)
bones/2/rotation = Quaternion(0.0266635, -0.0296655, -0.031249, 0.998715)
bones/3/rotation = Quaternion(0.00225788, -0.0482997, -0.0768283, 0.995871)
bones/4/rotation = Quaternion(0.121917, 0.162151, -0.0342378, 0.978607)
bones/5/rotation = Quaternion(-0.200447, 0.0734138, 0.0289419, 0.976521)
bones/7/rotation = Quaternion(0.594434, 0.404551, -0.508945, 0.473246)
bones/8/rotation = Quaternion(0.0593006, -0.358695, 0.199588, 0.909938)
bones/9/rotation = Quaternion(1.50758e-06, 1.35193e-06, 0.748298, 0.663363)
bones/10/rotation = Quaternion(0.0285028, 0.0622606, -0.28117, 0.957212)
bones/11/rotation = Quaternion(0.633043, -0.402938, 0.513209, 0.416549)
bones/12/rotation = Quaternion(0.30559, 0.143012, -0.690796, 0.639503)
bones/13/rotation = Quaternion(3.01766e-08, 7.3678e-07, -0.00220871, 0.999998)
bones/14/rotation = Quaternion(-0.0325735, 0.26114, -0.042316, 0.963823)
bones/15/rotation = Quaternion(-0.177386, -0.324981, -0.911663, 0.178303)
bones/16/rotation = Quaternion(-0.563352, -6.28954e-08, -6.99353e-09, 0.826217)
bones/17/rotation = Quaternion(0.739458, 0.0384875, -0.0766158, 0.66772)
bones/18/rotation = Quaternion(0.250865, 0.1669, -0.0144581, 0.953416)
bones/20/rotation = Quaternion(0.0301488, 0.0380242, 0.993369, 0.104228)
bones/21/rotation = Quaternion(-0.408274, -3.49221e-07, -1.19225e-07, 0.91286)
bones/22/rotation = Quaternion(0.846481, -0.0573189, 0.120808, 0.515354)
bones/23/rotation = Quaternion(0.212768, -0.127348, 0.0271579, 0.968388)

[node name="T3_002" parent="ControlRig/Skeleton3D" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_a7f18")
surface_material_override/1 = SubResource("StandardMaterial3D_7t628")
surface_material_override/2 = SubResource("StandardMaterial3D_yj0qj")

[node name="SwordAttachment" type="BoneAttachment3D" parent="ControlRig/Skeleton3D" index="1"]
transform = Transform3D(0.178242, -0.217557, 0.959634, 0.893418, -0.37291, -0.250485, 0.412352, 0.902002, 0.127901, -4.31368, 11.4405, 8.26208)
bone_name = "mixamorig_RightHand"
bone_idx = 14

[node name="ShieldAttachment" type="BoneAttachment3D" parent="ControlRig/Skeleton3D" index="2"]
transform = Transform3D(0.651543, -0.200712, -0.731578, -0.649983, 0.349565, -0.674779, 0.39117, 0.915161, 0.0972973, 3.5789, 14.0625, 9.73658)
bone_name = "mixamorig_LeftHand"
bone_idx = 10

[node name="BasicSword" parent="ControlRig" index="1" instance=ExtResource("3_a4jtx")]
transform = Transform3D(7.69962e-08, 1.5, -2.83042e-07, 1.49429, -6.53176e-08, 0.283256, 0.130734, -1.36849e-07, -3.23763, -4.31368, 11.4405, 8.26208)

[node name="Blade" parent="ControlRig/BasicSword" index="0"]
transform = Transform3D(1, 1.67037e-25, 7.30142e-30, 0, -4.37114e-11, 1, 1.67037e-22, -0.001, -4.37114e-08, 0, 0, 0)

[node name="GPUTrail3D" parent="ControlRig/BasicSword" index="1"]
transform = Transform3D(11.25, 6.57396e-22, 2.87357e-29, 0, -4.91753e-07, 11.25, 6.57396e-22, -11.25, -4.91753e-07, 0.254, 0.168, -10)
amount = 36
lifetime = 36.0
length = 36

[node name="BasicSwordHandle" parent="ControlRig/BasicSword" index="3"]
transform = Transform3D(1, 1.67037e-22, 7.30142e-30, 0, -4.37114e-08, 1, 1.67037e-22, -1, -4.37114e-08, 0, 0, 0)

[node name="BasicGreatshield" parent="ControlRig" index="2" instance=ExtResource("4_5dmke")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.5789, 14.0625, 9.73658)

[node name="StaticBody3D" parent="ControlRig/BasicGreatshield" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.08165e-12, -7, -2)

[node name="CollisionShape3D" parent="ControlRig/BasicGreatshield/StaticBody3D" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.08165e-12, 2.08165e-12, 2.08165e-12)

[editable path="ControlRig/BasicSword"]
[editable path="ControlRig/BasicGreatshield"]
