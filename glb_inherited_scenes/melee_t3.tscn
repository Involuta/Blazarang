[gd_scene load_steps=10 format=3 uid="uid://donkrix8titvb"]

[ext_resource type="PackedScene" uid="uid://5uv6uo3oxhqi" path="res://glb_imports/MeleeT3H.glb" id="1_4cfri"]
[ext_resource type="Script" path="res://glb_inherited_scenes/attach_to_hand.gd" id="2_4auvi"]
[ext_resource type="PackedScene" uid="uid://dasrfemvybmv" path="res://glb_inherited_scenes/basic_sword.tscn" id="3_a4jtx"]
[ext_resource type="PackedScene" uid="uid://cmyp1gi10xqj" path="res://glb_inherited_scenes/basic_greatshield.tscn" id="4_5dmke"]

[sub_resource type="Shader" id="Shader_gxs6v"]
code = "shader_type spatial;
render_mode cull_front, unshaded;

uniform vec4 outline_color : source_color;
uniform float outline_width = 1.0;

void vertex() {
	vec4 clip_position = PROJECTION_MATRIX * (MODELVIEW_MATRIX * vec4(VERTEX, 1.0));
	vec3 clip_normal = mat3(PROJECTION_MATRIX) * (mat3(MODELVIEW_MATRIX) * NORMAL);
	
	vec2 offset = normalize(clip_normal.xy) / VIEWPORT_SIZE * clip_position.w * outline_width * 2.0;
	
	clip_position.xy += offset;
	
	POSITION = clip_position;
}

void fragment() {
	ALBEDO = outline_color.rgb;
	if (outline_color.a < 1.0) {
		ALPHA = outline_color.a;
	}
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_wets6"]
render_priority = 0
shader = SubResource("Shader_gxs6v")
shader_parameter/outline_color = Color(1, 1, 0, 1)
shader_parameter/outline_width = 1.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_a7f18"]
next_pass = SubResource("ShaderMaterial_wets6")
diffuse_mode = 3
specular_mode = 2
albedo_color = Color(0.0666667, 0.0666667, 0.0666667, 1)
roughness = 0.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_7t628"]
shading_mode = 0
albedo_color = Color(0.607843, 0.607843, 0, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_yj0qj"]
diffuse_mode = 3
specular_mode = 1
albedo_color = Color(0.45098, 0.45098, 0.0588235, 1)
roughness = 0.2

[node name="MeleeT3H" instance=ExtResource("1_4cfri")]

[node name="ControlRig" parent="." index="0"]
script = ExtResource("2_4auvi")
obj_names = ["BasicSword", "BasicGreatshield"]
attachment_names = ["SwordAttachment", "ShieldAttachment"]
local_offset = Vector3(2.08165e-12, 2.08165e-12, 2.08165e-12)

[node name="Skeleton3D" parent="ControlRig" index="0"]
bones/0/position = Vector3(0.186255, 8.75602, -0.592007)
bones/0/rotation = Quaternion(0.0410133, -0.160225, -0.0272525, 0.985852)
bones/1/rotation = Quaternion(0.0427317, -0.0145429, 0.00638905, 0.99896)
bones/2/rotation = Quaternion(0.0266635, -0.0296655, -0.031249, 0.998715)
bones/3/rotation = Quaternion(0.00225788, -0.0482997, -0.0768283, 0.995871)
bones/4/rotation = Quaternion(0.121917, 0.162151, -0.0342378, 0.978607)
bones/5/rotation = Quaternion(-0.200447, 0.0734138, 0.0289419, 0.976521)
bones/7/rotation = Quaternion(0.594434, 0.404551, -0.508945, 0.473246)
bones/8/rotation = Quaternion(0.0401389, -0.3164, 0.253177, 0.913335)
bones/9/rotation = Quaternion(1.13664e-06, 1.63214e-06, 0.577653, 0.816282)
bones/10/rotation = Quaternion(-0.0297772, 0.0575301, -0.111085, 0.991697)
bones/11/rotation = Quaternion(0.633043, -0.402938, 0.513209, 0.416549)
bones/12/rotation = Quaternion(-0.625528, 0.495523, -0.258227, 0.54451)
bones/13/rotation = Quaternion(2.10245e-08, 7.43017e-07, -0.00220006, 0.999998)
bones/14/rotation = Quaternion(0.0530457, 0.892982, 0.0726339, 0.441015)
bones/15/rotation = Quaternion(-0.17189, -0.290478, -0.928957, 0.152036)
bones/16/rotation = Quaternion(-0.286171, -6.17681e-08, 8.79331e-09, 0.958179)
bones/17/rotation = Quaternion(0.537775, 0.010019, -0.0617465, 0.840765)
bones/18/rotation = Quaternion(0.250865, 0.1669, -0.0144581, 0.953416)
bones/20/rotation = Quaternion(0.0592836, 0.0909489, 0.992119, 0.0625521)
bones/21/rotation = Quaternion(-0.310299, -3.52383e-07, -1.20401e-07, 0.950639)
bones/22/rotation = Quaternion(0.755799, -0.0277186, 0.0834264, 0.648875)
bones/23/rotation = Quaternion(0.212768, -0.127348, 0.0271579, 0.968388)

[node name="T3_002" parent="ControlRig/Skeleton3D" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_a7f18")
surface_material_override/1 = SubResource("StandardMaterial3D_7t628")
surface_material_override/2 = SubResource("StandardMaterial3D_yj0qj")

[node name="SwordAttachment" type="BoneAttachment3D" parent="ControlRig/Skeleton3D" index="1"]
transform = Transform3D(0.178243, -0.217556, 0.959635, 0.0948678, 0.974508, 0.203307, -0.979402, 0.0548004, 0.194338, -3.54713, 24.7925, -1.25036)
bone_name = "mixamorig_RightHand"
bone_idx = 14

[node name="ShieldAttachment" type="BoneAttachment3D" parent="ControlRig/Skeleton3D" index="2"]
transform = Transform3D(0.651542, -0.200747, -0.731569, -0.649966, 0.349574, -0.674791, 0.391199, 0.91515, 0.097283, 3.5787, 14.0627, 9.73644)
bone_name = "mixamorig_LeftHand"
bone_idx = 10

[node name="BasicSword" parent="ControlRig" index="1" instance=ExtResource("3_a4jtx")]
transform = Transform3D(-6.55471e-08, 1.5, -4.95863e-09, 0.0261786, -1.1443e-09, -3.2495, -1.49977, -6.55771e-08, -0.0567202, -3.54713, 24.7925, -1.25036)

[node name="Blade" parent="ControlRig/BasicSword" index="0"]
transform = Transform3D(1, 1.67037e-25, 7.30142e-30, 0, -4.37114e-11, 1, 1.67037e-22, -0.001, -4.37114e-08, 0, 0, 0)

[node name="GPUTrail3D" parent="ControlRig/BasicSword" index="1"]
transform = Transform3D(11.25, 6.57396e-22, 2.87357e-29, 0, -4.91753e-07, 11.25, 6.57396e-22, -11.25, -4.91753e-07, 0.254, 0.168, -10)
amount = 36
lifetime = 36.0
length = 36

[node name="BasicSwordHandle" parent="ControlRig/BasicSword" index="3"]
transform = Transform3D(1, 1.67037e-22, 7.30142e-30, 0, -4.37114e-08, 1, 1.67037e-22, -1, -4.37114e-08, 0, 0, 0)

[node name="BasicGreatshield" parent="ControlRig" index="2" instance=ExtResource("4_5dmke")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.5787, 14.0627, 9.73644)

[node name="StaticBody3D" parent="ControlRig/BasicGreatshield" index="2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.08165e-12, -7, -2)

[node name="CollisionShape3D" parent="ControlRig/BasicGreatshield/StaticBody3D" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.08165e-12, 2.08165e-12, 2.08165e-12)

[editable path="ControlRig/BasicSword"]
[editable path="ControlRig/BasicGreatshield"]
